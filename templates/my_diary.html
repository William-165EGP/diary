{% extends "dashboard.html" %}
{% block content %}


<style>
  .menu-wrapper {
    position: relative;
    display: flex;
    justify-content: flex-end;
  }

  .menu-toggle {
    font-size: 30px;
    cursor: pointer;
    padding: 10px;
  }

  .dropdown {
    display: none;
    position: absolute;
    right: 0;
    top: 45px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    z-index: 10;
    padding: 10px;
    min-width: 150px;
  }

  .dropdown a {
    display: block;
    padding: 8px;
    text-decoration: none;
    color: black;
  }

  .dropdown a:hover {
    background-color: #f2f2f2;
  }
</style>

<div class="menu-wrapper">
  <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
  <div id="dropdownMenu" class="dropdown">
    <a href="/">æ‰€æœ‰æ—¥è¨˜</a>
    <a href="/game">éŠæˆ²</a>
    <a href="/quiz">å¿ƒç†æ¸¬é©—</a>
  </div>
</div>

<script>
  const dropdown = document.getElementById('dropdownMenu');

  function toggleMenu() {
    dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';
  }

  document.addEventListener('click', function(event) {
    const isClickInside = dropdown.contains(event.target) || event.target.classList.contains('menu-toggle');
    if (!isClickInside) {
      dropdown.style.display = 'none';
    }
  });
</script>


<h2>{{ username }} çš„æ—¥è¨˜</h2>

{% if diaries %}
{% for d in diaries %}
<div style="margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 6px;">
  {% if d.created_at %}
  <p><strong>æ™‚é–“ï¼š</strong> {{ d.created_at }}ï¼ˆ{{ time_since(d.created_at) }}ï¼‰</p>
  {% else %}
  <p><strong>æ™‚é–“ï¼š</strong> æœªçŸ¥</p>
  {% endif %}
  <p><strong>å…¬é–‹ç‹€æ…‹ï¼š</strong> {{ 'å…¬é–‹' if d.public else 'ç§äºº' }}</p>
  <p>{{ d.content }}</p>

  <form method="post" action="{{ url_for('delete_diary', diary_id=d.id) }}" onsubmit="return confirm('ç¢ºå®šè¦åˆªé™¤é€™ç¯‡æ—¥è¨˜å—ï¼Ÿ')">
    <button type="submit">ğŸ—‘ åˆªé™¤</button>
  </form>
</div>
{% endfor %}
{% else %}
<p>ä½ é‚„æ²’æœ‰å¯«éä»»ä½•æ—¥è¨˜ã€‚</p>
{% endif %}

<a class="fab" href="{{ url_for('write') }}">ğŸ–Šï¸</a>

{% endblock %}